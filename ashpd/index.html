<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="ASHPD"><title>ashpd - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="ashpd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0-nightly (960754090 2023-10-06)" data-channel="nightly" data-search-js="search-5f5ec5419eadd0c9.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/bilelmoussaoui/ashpd/master/ashpd-demo/data/icons/com.belmoussaoui.ashpd.demo-symbolic.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../ashpd/index.html"><img src="https://raw.githubusercontent.com/bilelmoussaoui/ashpd/master/ashpd-demo/data/icons/com.belmoussaoui.ashpd.demo.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../ashpd/index.html"><img src="https://raw.githubusercontent.com/bilelmoussaoui/ashpd/master/ashpd-demo/data/icons/com.belmoussaoui.ashpd.demo.svg" alt="logo"></a><h2 class="location"><a href="#">Crate ashpd</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.6.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">ashpd</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/ashpd/lib.rs.html#1-61">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="ashpd"><a href="#ashpd">ASHPD</a></h2>
<p><a href="https://docs.rs/ashpd/"><img src="https://docs.rs/ashpd/badge.svg" alt="docs" /></a> <a href="https://crates.io/crates/ashpd"><img src="https://img.shields.io/crates/v/ashpd" alt="crates.io" /></a> <img src="https://github.com/bilelmoussaoui/ashpd/workflows/CI/badge.svg" alt="CI" /></p>
<p>ASHPD, acronym of Aperture Science Handheld Portal Device is a Rust &amp; <a href="https://gitlab.freedesktop.org/dbus/zbus">zbus</a> wrapper of
the XDG portals DBus interfaces. The library aims to provide an easy way to
interact with the various portals defined per the <a href="https://flatpak.github.io/xdg-desktop-portal/index.html">specifications</a>.
It provides an alternative to the C library <a href="https://github.com/flatpak/libportal">https://github.com/flatpak/libportal</a></p>
<h3 id="examples"><a href="#examples">Examples</a></h3>
<p>Ask the compositor to pick a color</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>ashpd::desktop::Color;

<span class="kw">async fn </span>run() -&gt; ashpd::Result&lt;()&gt; {
    <span class="kw">let </span>color = Color::pick().send().<span class="kw">await</span><span class="question-mark">?</span>.response()<span class="question-mark">?</span>;
    <span class="macro">println!</span>(<span class="string">&quot;({}, {}, {})&quot;</span>, color.red(), color.green(), color.blue());
    <span class="prelude-val">Ok</span>(())
}</code></pre></div>
<p>Start a PipeWire stream from the user’s camera</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>ashpd::desktop::camera::Camera;

<span class="kw">pub async fn </span>run() -&gt; ashpd::Result&lt;()&gt; {
    <span class="kw">let </span>camera = Camera::new().<span class="kw">await</span><span class="question-mark">?</span>;
    <span class="kw">if </span>camera.is_present().<span class="kw">await</span><span class="question-mark">? </span>{
        camera.request_access().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="kw">let </span>remote_fd = camera.open_pipe_wire_remote().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="comment">// pass the remote fd to GStreamer for example
    </span>}
    <span class="prelude-val">Ok</span>(())
}</code></pre></div>
<h3 id="optional-features"><a href="#optional-features">Optional features</a></h3><div><table><thead><tr><th>Feature</th><th>Description</th><th>Default</th></tr></thead><tbody>
<tr><td>tracing</td><td>Record various debug information using the <code>tracing</code> library</td><td>No</td></tr>
<tr><td>tokio</td><td>Enable tokio runtime on zbus dependency</td><td>No</td></tr>
<tr><td>async-std</td><td>Enable the use of the async-std runtime</td><td>Yes</td></tr>
<tr><td>gtk4</td><td>Implement <code>From&lt;Color&gt;</code> for <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gdk4/struct.RGBA.html"><code>gdk4::RGBA</code></a> Provides <code>WindowIdentifier::from_native</code> that takes a <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gtk4/struct.Native.html"><code>IsA&lt;gtk4::Native&gt;</code></a></td><td>No</td></tr>
<tr><td>gtk4_wayland</td><td>Provides <code>WindowIdentifier::from_native</code> that takes a <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gtk4/struct.Native.html"><code>IsA&lt;gtk4::Native&gt;</code></a> with Wayland backend support only</td><td>No</td></tr>
<tr><td>gtk4_x11</td><td>Provides <code>WindowIdentifier::from_native</code> that takes a <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gtk4/struct.Native.html"><code>IsA&lt;gtk4::Native&gt;</code></a> with X11 backend support only</td><td>No</td></tr>
<tr><td>pipewire</td><td>Provides <code>ashpd::desktop::camera::pipewire_streams</code> that helps you retrieve the various camera streams associated with the retrieved file descriptor</td><td>No</td></tr>
<tr><td>raw_handle</td><td>Provides <code>WindowIdentifier::from_raw_handle</code> and <code>WindowIdentifier::as_raw_handle</code> for <a href="https://lib.rs/crates/raw-window-handle">raw-window-handle</a> crate</td><td>No</td></tr>
<tr><td>wayland</td><td>Provides <code>WindowIdentifier::from_wayland</code> for <a href="https://lib.rs/crates/wayland-client">wayland-client</a> crate</td><td>No</td></tr>
</tbody></table>
</div><h3 id="demo"><a href="#demo">Demo</a></h3>
<p>The library comes with a <a href="./ashpd-demo">demo</a> built using the <a href="https://gtk-rs.org/gtk4-rs">GTK 4 Rust bindings</a> and previews most of the portals. It is meant as a test case for the portals (from a distributor perspective) and as a way for the developers to see which portals exists and how to integrate them into their application using ASHPD.</p>
<a href="https://flathub.org/apps/details/com.belmoussaoui.ashpd.demo">
<img src="https://flathub.org/assets/badges/flathub-badge-i-en.png" width="190px" />
</a></div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.enumflags2"><code>pub use <a class="mod" href="https://docs.rs/enumflags2/latest/enumflags2/index.html" title="mod enumflags2">enumflags2</a>;</code></div></li><li><div class="item-name" id="reexport.url"><code>pub use <a class="mod" href="https://docs.rs/url/2.4.1/url/index.html" title="mod url">url</a>;</code></div></li><li><div class="item-name" id="reexport.zbus"><code>pub use <a class="mod" href="https://docs.rs/zbus/latest/zbus/index.html" title="mod zbus">zbus</a>;</code></div></li><li><div class="item-name" id="reexport.zvariant"><code>pub use zbus::<a class="mod" href="https://docs.rs/zvariant/latest/zvariant/index.html" title="mod zvariant">zvariant</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="desktop/index.html" title="mod ashpd::desktop">desktop</a></div><div class="desc docblock-short">Interact with the user’s desktop such as taking a screenshot, setting a
background or querying the user’s location.</div></li><li><div class="item-name"><a class="mod" href="documents/index.html" title="mod ashpd::documents">documents</a></div><div class="desc docblock-short">Interact with the documents store or transfer files across apps.</div></li><li><div class="item-name"><a class="mod" href="flatpak/index.html" title="mod ashpd::flatpak">flatpak</a></div><div class="desc docblock-short">Spawn commands outside the sandbox or monitor if the running application has
received an update &amp; install it.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AppID.html" title="struct ashpd::AppID">AppID</a></div><div class="desc docblock-short">The application ID.</div></li><li><div class="item-name"><a class="struct" href="struct.FilePath.html" title="struct ashpd::FilePath">FilePath</a></div><div class="desc docblock-short">A file name represented as a nul-terminated byte array.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum ashpd::Error">Error</a></div><div class="desc docblock-short">The error type for ashpd.</div></li><li><div class="item-name"><a class="enum" href="enum.PortalError.html" title="enum ashpd::PortalError">PortalError</a></div><div class="desc docblock-short">An error type that describes the various DBus errors.</div></li><li><div class="item-name"><a class="enum" href="enum.WindowIdentifier.html" title="enum ashpd::WindowIdentifier">WindowIdentifier</a></div><div class="desc docblock-short">Most portals interact with the user by showing dialogs.
These dialogs should generally be placed on top of the application window
that triggered them. To arrange this, the compositor needs to know about the
application window. Many portal requests expect a <a href="enum.WindowIdentifier.html" title="enum ashpd::WindowIdentifier"><code>WindowIdentifier</code></a> for
this reason.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.is_sandboxed.html" title="fn ashpd::is_sandboxed">is_sandboxed</a></div><div class="desc docblock-short">Check whether the application is running inside a sandbox.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type ashpd::Result">Result</a></div><div class="desc docblock-short">Alias for a <a href="type.Result.html" title="type ashpd::Result"><code>Result</code></a> with the error type <code>ashpd::Error</code>.</div></li></ul></section></div></main></body></html>